--
-- PostgreSQL database dump
--

\restrict Ic4WpGoPMsHO5dtmbhGFKzxC95KyvdtxA5o5KCjdowP6Uqg2s7gbh10B069zTWW

-- Dumped from database version 17.6 (Debian 17.6-2.pgdg13+1)
-- Dumped by pg_dump version 17.6 (Debian 17.6-2.pgdg13+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: web_schema; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA web_schema;


ALTER SCHEMA web_schema OWNER TO postgres;

--
-- Name: sp_get_regiones(); Type: FUNCTION; Schema: web_schema; Owner: postgres
--

CREATE FUNCTION web_schema.sp_get_regiones() RETURNS refcursor
    LANGUAGE plpgsql
    AS $$
DECLARE
    regiones_cursor refcursor;
BEGIN
    OPEN regiones_cursor FOR
        SELECT id_region, region FROM tbl_region;
    RETURN regiones_cursor;
END;
$$;


ALTER FUNCTION web_schema.sp_get_regiones() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: tbl_pyme; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_pyme (
    id_pyme integer NOT NULL,
    nombre_pyme character varying(100),
    direccion character varying(100),
    id_comuna integer NOT NULL,
    descripcion_pyme text DEFAULT ''::character varying NOT NULL
);


ALTER TABLE public.tbl_pyme OWNER TO postgres;

--
-- Name: pyme_id_pyme_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_pyme ALTER COLUMN id_pyme ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.pyme_id_pyme_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: seq_sub_serv_pyme; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.seq_sub_serv_pyme
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.seq_sub_serv_pyme OWNER TO postgres;

--
-- Name: tbl_comentario; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_comentario (
    id_comentario integer NOT NULL,
    comentario character varying(300) NOT NULL,
    cant_estrella numeric(2,1),
    id_orden_compra integer NOT NULL
);


ALTER TABLE public.tbl_comentario OWNER TO postgres;

--
-- Name: tbl_comentario_id_comentario_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_comentario ALTER COLUMN id_comentario ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_comentario_id_comentario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_comuna; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_comuna (
    id_comuna integer NOT NULL,
    comuna character varying(100) NOT NULL,
    id_region integer NOT NULL
);


ALTER TABLE public.tbl_comuna OWNER TO postgres;

--
-- Name: tbl_comuna_id_comuna_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_comuna ALTER COLUMN id_comuna ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_comuna_id_comuna_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_item; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_item (
    id_item integer NOT NULL,
    nombre character varying(100) NOT NULL,
    descripcion character varying(255) NOT NULL,
    duracion_min integer,
    duracion_max integer,
    id_pyme integer NOT NULL,
    id_tipo_item integer NOT NULL,
    id_tipo_sub_servicio integer NOT NULL
);


ALTER TABLE public.tbl_item OWNER TO postgres;

--
-- Name: tbl_item_id_item_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_item ALTER COLUMN id_item ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_item_id_item_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_orden_compra; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_orden_compra (
    id_orden_compra integer NOT NULL,
    estado integer NOT NULL,
    id_pyme integer NOT NULL,
    id_usuario integer NOT NULL
);


ALTER TABLE public.tbl_orden_compra OWNER TO postgres;

--
-- Name: tbl_orden_compra_id_orden_compra_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_orden_compra ALTER COLUMN id_orden_compra ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_orden_compra_id_orden_compra_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_region; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_region (
    id_region integer NOT NULL,
    region character varying(100) NOT NULL
);


ALTER TABLE public.tbl_region OWNER TO postgres;

--
-- Name: tbl_region_id_region_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_region ALTER COLUMN id_region ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_region_id_region_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_sub_serv_pyme; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_sub_serv_pyme (
    id_sub_serv_pyme integer DEFAULT nextval('public.seq_sub_serv_pyme'::regclass) NOT NULL,
    id_pyme integer NOT NULL,
    id_sub_servicio integer NOT NULL
);


ALTER TABLE public.tbl_sub_serv_pyme OWNER TO postgres;

--
-- Name: tbl_sub_servicio; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_sub_servicio (
    id_sub_servicio integer NOT NULL,
    tipo_sub_servicio character varying(100) NOT NULL,
    id_tipo_servicio integer NOT NULL
);


ALTER TABLE public.tbl_sub_servicio OWNER TO postgres;

--
-- Name: tbl_sub_servicio_id_sub_servicio_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_sub_servicio ALTER COLUMN id_sub_servicio ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_sub_servicio_id_sub_servicio_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_tipo_item; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_tipo_item (
    id_tipo_item integer NOT NULL,
    descripcion character varying(50) NOT NULL
);


ALTER TABLE public.tbl_tipo_item OWNER TO postgres;

--
-- Name: tbl_tipo_item_id_tipo_item_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_tipo_item ALTER COLUMN id_tipo_item ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_tipo_item_id_tipo_item_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_tipo_serv_pyme; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_tipo_serv_pyme (
    id_serv_pyme integer NOT NULL,
    id_pyme integer NOT NULL,
    id_tipo_servicio integer NOT NULL
);


ALTER TABLE public.tbl_tipo_serv_pyme OWNER TO postgres;

--
-- Name: tbl_tipo_serv_pyme_id_serv_pyme_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_tipo_serv_pyme ALTER COLUMN id_serv_pyme ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_tipo_serv_pyme_id_serv_pyme_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_tipo_servicio; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_tipo_servicio (
    id_tipo_servicio integer NOT NULL,
    tipo_servicio character varying(100) NOT NULL
);


ALTER TABLE public.tbl_tipo_servicio OWNER TO postgres;

--
-- Name: tbl_tipo_servicio_id_tipo_servicio_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_tipo_servicio ALTER COLUMN id_tipo_servicio ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_tipo_servicio_id_tipo_servicio_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_tipo_usuario; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_tipo_usuario (
    id_tipo_usuario integer NOT NULL,
    tipo_usuario character varying(50) NOT NULL
);


ALTER TABLE public.tbl_tipo_usuario OWNER TO postgres;

--
-- Name: tbl_tipo_usuario_id_tipo_usuario_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_tipo_usuario ALTER COLUMN id_tipo_usuario ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_tipo_usuario_id_tipo_usuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_usuario; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_usuario (
    id_usuario integer NOT NULL,
    nom_usuario character varying(255) NOT NULL,
    email character varying(255) NOT NULL,
    password character varying(255) NOT NULL,
    id_tipo_usuario integer NOT NULL,
    activo boolean DEFAULT false NOT NULL,
    pnombre character varying(50) NOT NULL,
    snombre character varying(50) NOT NULL,
    appaterno character varying(50) NOT NULL,
    apmaterno character varying(50) NOT NULL
);


ALTER TABLE public.tbl_usuario OWNER TO postgres;

--
-- Name: tbl_usuario_id_usuario_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_usuario ALTER COLUMN id_usuario ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_usuario_id_usuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_usuario_pyme; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tbl_usuario_pyme (
    id_usu_pyme integer NOT NULL,
    id_pyme integer NOT NULL,
    id_usuario integer NOT NULL
);


ALTER TABLE public.tbl_usuario_pyme OWNER TO postgres;

--
-- Name: tbl_usuario_pyme_id_usu_pyme_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.tbl_usuario_pyme ALTER COLUMN id_usu_pyme ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_usuario_pyme_id_usu_pyme_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: tbl_comentario; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_comentario (id_comentario, comentario, cant_estrella, id_orden_compra) FROM stdin;
\.


--
-- Data for Name: tbl_comuna; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_comuna (id_comuna, comuna, id_region) FROM stdin;
1	Arica	1
2	Camarones	1
3	Putre	1
4	General Lagos	1
5	Iquique	2
6	Alto Hospicio	2
7	Pozo Almonte	2
8	Camiña	2
9	Colchane	2
10	Huara	2
11	Pica	2
12	Antofagasta	3
13	Mejillones	3
14	Sierra Gorda	3
15	Taltal	3
16	Calama	3
17	Ollagüe	3
18	San Pedro de Atacama	3
19	Copiapó	4
20	Caldera	4
21	Tierra Amarilla	4
22	Chañaral	4
23	Diego de Almagro	4
24	Vallenar	4
25	Alto del Carmen	4
26	Freirina	4
27	Huasco	4
28	La Serena	5
29	Coquimbo	5
30	Andacollo	5
31	La Higuera	5
32	Paiguano	5
33	Vicuña	5
34	Illapel	5
35	Canela	5
36	Los Vilos	5
37	Salamanca	5
38	Ovalle	5
39	Combarbalá	5
40	Monte Patria	5
41	Punitaqui	5
42	Río Hurtado	5
43	Valparaíso	6
44	Casablanca	6
45	Concón	6
46	Juan Fernández	6
47	Puchuncaví	6
48	Quintero	6
49	Viña del Mar	6
50	Isla de Pascua	6
51	Los Andes	6
52	Calle Larga	6
53	Rinconada	6
54	San Esteban	6
55	La Ligua	6
56	Cabildo	6
57	Papudo	6
58	Petorca	6
59	Zapallar	6
60	Quillota	6
61	Calera	6
62	Hijuelas	6
63	La Cruz	6
64	Nogales	6
65	San Antonio	6
66	Algarrobo	6
67	Cartagena	6
68	El Quisco	6
69	El Tabo	6
70	Santo Domingo	6
71	San Felipe	6
72	Catemu	6
73	Llaillay	6
74	Panquehue	6
75	Putaendo	6
76	Santa María	6
77	Quilpué	6
78	Limache	6
79	Olmué	6
80	Villa Alemana	6
81	Santiago	7
82	Cerrillos	7
83	Cerro Navia	7
84	Conchalí	7
85	El Bosque	7
86	Estación Central	7
87	Huechuraba	7
88	Independencia	7
89	La Cisterna	7
90	La Florida	7
91	La Granja	7
92	La Pintana	7
93	La Reina	7
94	Las Condes	7
95	Lo Barnechea	7
96	Lo Espejo	7
97	Lo Prado	7
98	Macul	7
99	Maipú	7
100	Ñuñoa	7
101	Pedro Aguirre Cerda	7
102	Peñalolén	7
103	Providencia	7
104	Pudahuel	7
105	Quilicura	7
106	Quinta Normal	7
107	Recoleta	7
108	Renca	7
109	San Joaquín	7
110	San Miguel	7
111	San Ramón	7
112	Vitacura	7
113	Puente Alto	7
114	Pirque	7
115	San José de Maipo	7
116	Colina	7
117	Lampa	7
118	Tiltil	7
119	San Bernardo	7
120	Buin	7
121	Calera de Tango	7
122	Paine	7
123	Melipilla	7
124	Alhué	7
125	Curacaví	7
126	María Pinto	7
127	San Pedro	7
128	Talagante	7
129	El Monte	7
130	Isla de Maipo	7
131	Padre Hurtado	7
132	Peñaflor	7
133	Rancagua	8
134	Codegua	8
135	Coinco	8
136	Coltauco	8
137	Doñihue	8
138	Graneros	8
139	Las Cabras	8
140	Machalí	8
141	Malloa	8
142	Mostazal	8
143	Olivar	8
144	Peumo	8
145	Pichidegua	8
146	Quinta de Tilcoco	8
147	Rengo	8
148	Requínoa	8
149	San Vicente	8
150	Pichilemu	8
151	La Estrella	8
152	Litueche	8
153	Marchihue	8
154	Navidad	8
155	Paredones	8
156	San Fernando	8
157	Chépica	8
158	Chimbarongo	8
159	Lolol	8
160	Nancagua	8
161	Palmilla	8
162	Peralillo	8
163	Placilla	8
164	Pumanque	8
165	Santa Cruz	8
166	Talca	9
167	Constitución	9
168	Curepto	9
169	Empedrado	9
170	Maule	9
171	Pelarco	9
172	Pencahue	9
173	Río Claro	9
174	San Clemente	9
175	San Rafael	9
176	Cauquenes	9
177	Chanco	9
178	Pelluhue	9
179	Curicó	9
180	Hualañé	9
181	Licantén	9
182	Molina	9
183	Rauco	9
184	Romeral	9
185	Sagrada Familia	9
186	Teno	9
187	Vichuquén	9
188	Linares	9
189	Colbún	9
190	Longaví	9
191	Parral	9
192	Retiro	9
193	San Javier	9
194	Villa Alegre	9
195	Yerbas Buenas	9
196	Cobquecura	10
197	Coelemu	10
198	Ninhue	10
199	Portezuelo	10
200	Quirihue	10
201	Ránquil	10
202	Treguaco	10
203	Bulnes	10
204	Chillán	10
205	Chillán Viejo	10
206	El Carmen	10
207	Pemuco	10
208	Pinto	10
209	Quillón	10
210	San Ignacio	10
211	Yungay	10
212	Coihueco	10
213	Ñiquén	10
214	San Carlos	10
215	San Fabián	10
216	San Nicolás	10
217	Concepción	11
218	Coronel	11
219	Chiguayante	11
220	Florida	11
221	Hualqui	11
222	Lota	11
223	Penco	11
224	San Pedro de la Paz	11
225	Santa Juana	11
226	Talcahuano	11
227	Tomé	11
228	Hualpén	11
229	Lebu	11
230	Arauco	11
231	Cañete	11
232	Contulmo	11
233	Curanilahue	11
234	Los Álamos	11
235	Tirúa	11
236	Los Ángeles	11
237	Antuco	11
238	Cabrero	11
239	Laja	11
240	Mulchén	11
241	Nacimiento	11
242	Negrete	11
243	Quilaco	11
244	Quilleco	11
245	San Rosendo	11
246	Santa Bárbara	11
247	Tucapel	11
248	Yumbel	11
249	Alto Biobío	11
250	Temuco	12
251	Carahue	12
252	Cunco	12
253	Curarrehue	12
254	Freire	12
255	Galvarino	12
256	Gorbea	12
257	Lautaro	12
258	Loncoche	12
259	Melipeuco	12
260	Nueva Imperial	12
261	Padre Las Casas	12
262	Perquenco	12
263	Pitrufquén	12
264	Pucón	12
265	Saavedra	12
266	Teodoro Schmidt	12
267	Toltén	12
268	Vilcún	12
269	Villarrica	12
270	Cholchol	12
271	Valdivia	13
272	Corral	13
273	Lanco	13
274	Los Lagos	13
275	Máfil	13
276	Mariquina	13
277	Paillaco	13
278	Panguipulli	13
279	La Unión	13
280	Futrono	13
281	Lago Ranco	13
282	Río Bueno	13
283	Puerto Montt	14
284	Calbuco	14
285	Cochamó	14
286	Fresia	14
287	Frutillar	14
288	Los Muermos	14
289	Llanquihue	14
290	Maullín	14
291	Puerto Varas	14
292	Castro	14
293	Ancud	14
294	Chonchi	14
295	Curaco de Vélez	14
296	Dalcahue	14
297	Puqueldón	14
298	Queilén	14
299	Quellón	14
300	Quemchi	14
301	Quinchao	14
302	Osorno	14
303	Puerto Octay	14
304	Purranque	14
305	Puyehue	14
306	Río Negro	14
307	San Juan de la Costa	14
308	San Pablo	14
309	Chaitén	14
310	Futaleufú	14
311	Hualaihué	14
312	Palena	14
313	Coyhaique	15
314	Lago Verde	15
315	Aysén	15
316	Cisnes	15
317	Guaitecas	15
318	Cochrane	15
319	O’Higgins	15
320	Tortel	15
321	Chile Chico	15
322	Río Ibáñez	15
323	Punta Arenas	16
324	Laguna Blanca	16
325	Río Verde	16
326	San Gregorio	16
327	Cabo de Hornos	16
328	Antártica	16
329	Porvenir	16
330	Primavera	16
331	Timaukel	16
332	Natales	16
333	Torres del Paine	16
\.


--
-- Data for Name: tbl_item; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_item (id_item, nombre, descripcion, duracion_min, duracion_max, id_pyme, id_tipo_item, id_tipo_sub_servicio) FROM stdin;
\.


--
-- Data for Name: tbl_orden_compra; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_orden_compra (id_orden_compra, estado, id_pyme, id_usuario) FROM stdin;
\.


--
-- Data for Name: tbl_pyme; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_pyme (id_pyme, nombre_pyme, direccion, id_comuna, descripcion_pyme) FROM stdin;
1	Foqui Restaurante	La condesa 9569	90	Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ornare ultricies sem, varius pulvinar enim vulputate non. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nulla nec bibendum sapien. Nulla nulla elit, tincidunt ac faucibus non, fringilla at elit. Curabitur eu lectus non sem mollis dignissim sit amet ac felis. Quisque aliquam sem odio, eget luctus nisl rhoncus sed. Vivamus et commodo mi, in lobortis ligula. Donec consequat mauris mi, et accumsan arcu facilisis id. Nullam id nulla ornare arcu aliquet elementum non eu magna. Ut ex quam, mollis ut est non, rhoncus lacinia justo. Nunc varius orci id sem sodales, eu pharetra lorem interdum. Vivamus condimentum urna non arcu dapibus, ac rutrum eros auctor.
3	Foca Hogar	Su casa	90	Pyme en la que amamos hacer arreglos del hogar
\.


--
-- Data for Name: tbl_region; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_region (id_region, region) FROM stdin;
1	Región de Arica y Parinacota
2	Región de Tarapacá
3	Región de Antofagasta
4	Región de Atacama
5	Región de Coquimbo
6	Región de Valparaíso
7	Región Metropolitana de Santiago
8	Región del Libertador General Bernardo O’Higgins
9	Región del Maule
10	Región de Ñuble
11	Región del Biobío
12	Región de La Araucanía
13	Región de Los Ríos
14	Región de Los Lagos
15	Región de Aysén del General Carlos Ibáñez del Campo
16	Región de Magallanes y de la Antártica Chilena
\.


--
-- Data for Name: tbl_sub_serv_pyme; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_sub_serv_pyme (id_sub_serv_pyme, id_pyme, id_sub_servicio) FROM stdin;
1	3	4
2	3	5
3	3	6
4	3	7
5	3	8
\.


--
-- Data for Name: tbl_sub_servicio; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_sub_servicio (id_sub_servicio, tipo_sub_servicio, id_tipo_servicio) FROM stdin;
1	Completos	1
2	Hamburguesa	1
3	Papas Fritas	1
4	Gasfiteria	6
5	Jardineria	6
6	Plomeria	6
7	Pintura	6
8	Electricidad	6
9	Flores	5
10	Chocolates	5
11	Desayunos	5
12	Galletas	5
13	Ramos	5
14	Armado de pc	4
15	Cotizacion de computador	4
16	Mantenimiento de equipo	4
\.


--
-- Data for Name: tbl_tipo_item; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_tipo_item (id_tipo_item, descripcion) FROM stdin;
1	Producto
2	Servicio
\.


--
-- Data for Name: tbl_tipo_serv_pyme; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_tipo_serv_pyme (id_serv_pyme, id_pyme, id_tipo_servicio) FROM stdin;
1	3	6
\.


--
-- Data for Name: tbl_tipo_servicio; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_tipo_servicio (id_tipo_servicio, tipo_servicio) FROM stdin;
1	Comida
2	Dentista
3	Peluqueria
4	Computacion
5	Regalos
6	Hogar
\.


--
-- Data for Name: tbl_tipo_usuario; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_tipo_usuario (id_tipo_usuario, tipo_usuario) FROM stdin;
1	Admin
2	Admin Pyme
3	Socio Pyme
4	Consumidor
\.


--
-- Data for Name: tbl_usuario; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_usuario (id_usuario, nom_usuario, email, password, id_tipo_usuario, activo, pnombre, snombre, appaterno, apmaterno) FROM stdin;
1	raz	simon.delafuente20@gmail.com	$2a$10$honRb8.PJvdjYiQEqLnpOONToPSUIkuNsHQ5S3VVhyQ51FOnT5na6	2	t				
2	Admin maximo	simon.delafuente18@gmail.com	$2a$10$honRb8.PJvdjYiQEqLnpOONToPSUIkuNsHQ5S3VVhyQ51FOnT5na6	1	t				
7	FocaHogar	simon.delafuente21@gmail.com	$2a$10$h55mM/SONmdKH3K4j8PEreb/3PahyV1K00Cv5OMasOgFo1p2s9oIa	2	t	Foca	Focaza	Foquita	Focarona
\.


--
-- Data for Name: tbl_usuario_pyme; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tbl_usuario_pyme (id_usu_pyme, id_pyme, id_usuario) FROM stdin;
1	1	1
3	3	7
\.


--
-- Name: pyme_id_pyme_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.pyme_id_pyme_seq', 3, true);


--
-- Name: seq_sub_serv_pyme; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.seq_sub_serv_pyme', 5, true);


--
-- Name: tbl_comentario_id_comentario_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_comentario_id_comentario_seq', 1, false);


--
-- Name: tbl_comuna_id_comuna_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_comuna_id_comuna_seq', 333, true);


--
-- Name: tbl_item_id_item_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_item_id_item_seq', 1, false);


--
-- Name: tbl_orden_compra_id_orden_compra_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_orden_compra_id_orden_compra_seq', 1, false);


--
-- Name: tbl_region_id_region_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_region_id_region_seq', 16, true);


--
-- Name: tbl_sub_servicio_id_sub_servicio_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_sub_servicio_id_sub_servicio_seq', 16, true);


--
-- Name: tbl_tipo_item_id_tipo_item_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_tipo_item_id_tipo_item_seq', 2, true);


--
-- Name: tbl_tipo_serv_pyme_id_serv_pyme_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_tipo_serv_pyme_id_serv_pyme_seq', 1, true);


--
-- Name: tbl_tipo_servicio_id_tipo_servicio_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_tipo_servicio_id_tipo_servicio_seq', 6, true);


--
-- Name: tbl_tipo_usuario_id_tipo_usuario_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_tipo_usuario_id_tipo_usuario_seq', 4, true);


--
-- Name: tbl_usuario_id_usuario_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_usuario_id_usuario_seq', 7, true);


--
-- Name: tbl_usuario_pyme_id_usu_pyme_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tbl_usuario_pyme_id_usu_pyme_seq', 3, true);


--
-- Name: tbl_sub_serv_pyme pk_sub_serv_pyme; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_sub_serv_pyme
    ADD CONSTRAINT pk_sub_serv_pyme PRIMARY KEY (id_sub_serv_pyme);


--
-- Name: tbl_comentario tbl_comentario_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_comentario
    ADD CONSTRAINT tbl_comentario_pkey PRIMARY KEY (id_comentario);


--
-- Name: tbl_comuna tbl_comuna_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_comuna
    ADD CONSTRAINT tbl_comuna_pkey PRIMARY KEY (id_comuna);


--
-- Name: tbl_item tbl_item_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_item
    ADD CONSTRAINT tbl_item_pkey PRIMARY KEY (id_item);


--
-- Name: tbl_orden_compra tbl_orden_compra_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_orden_compra
    ADD CONSTRAINT tbl_orden_compra_pkey PRIMARY KEY (id_orden_compra);


--
-- Name: tbl_pyme tbl_pyme_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_pyme
    ADD CONSTRAINT tbl_pyme_pkey PRIMARY KEY (id_pyme);


--
-- Name: tbl_region tbl_region_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_region
    ADD CONSTRAINT tbl_region_pkey PRIMARY KEY (id_region);


--
-- Name: tbl_region tbl_region_region_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_region
    ADD CONSTRAINT tbl_region_region_key UNIQUE (region);


--
-- Name: tbl_sub_servicio tbl_sub_servicio_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_sub_servicio
    ADD CONSTRAINT tbl_sub_servicio_pkey PRIMARY KEY (id_sub_servicio);


--
-- Name: tbl_tipo_item tbl_tipo_item_descripcion_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_tipo_item
    ADD CONSTRAINT tbl_tipo_item_descripcion_key UNIQUE (descripcion);


--
-- Name: tbl_tipo_item tbl_tipo_item_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_tipo_item
    ADD CONSTRAINT tbl_tipo_item_pkey PRIMARY KEY (id_tipo_item);


--
-- Name: tbl_tipo_serv_pyme tbl_tipo_serv_pyme_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_tipo_serv_pyme
    ADD CONSTRAINT tbl_tipo_serv_pyme_pkey PRIMARY KEY (id_serv_pyme);


--
-- Name: tbl_tipo_servicio tbl_tipo_servicio_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_tipo_servicio
    ADD CONSTRAINT tbl_tipo_servicio_pkey PRIMARY KEY (id_tipo_servicio);


--
-- Name: tbl_tipo_servicio tbl_tipo_servicio_tipo_servicio_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_tipo_servicio
    ADD CONSTRAINT tbl_tipo_servicio_tipo_servicio_key UNIQUE (tipo_servicio);


--
-- Name: tbl_tipo_usuario tbl_tipo_usuario_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_tipo_usuario
    ADD CONSTRAINT tbl_tipo_usuario_pkey PRIMARY KEY (id_tipo_usuario);


--
-- Name: tbl_tipo_usuario tbl_tipo_usuario_tipo_usuario_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_tipo_usuario
    ADD CONSTRAINT tbl_tipo_usuario_tipo_usuario_key UNIQUE (tipo_usuario);


--
-- Name: tbl_usuario tbl_usuario_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_usuario
    ADD CONSTRAINT tbl_usuario_pkey PRIMARY KEY (id_usuario);


--
-- Name: tbl_usuario_pyme tbl_usuario_pyme_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_usuario_pyme
    ADD CONSTRAINT tbl_usuario_pyme_pkey PRIMARY KEY (id_usu_pyme);


--
-- Name: tbl_comuna uq_comuna; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_comuna
    ADD CONSTRAINT uq_comuna UNIQUE (comuna, id_region);


--
-- Name: idx_comuna_id_region; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_comuna_id_region ON public.tbl_comuna USING btree (id_region);


--
-- Name: idx_sub_serv_pyme_id_pyme; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_sub_serv_pyme_id_pyme ON public.tbl_sub_serv_pyme USING btree (id_pyme);


--
-- Name: idx_sub_serv_pyme_id_sub_servicio; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_sub_serv_pyme_id_sub_servicio ON public.tbl_sub_serv_pyme USING btree (id_sub_servicio);


--
-- Name: tbl_comuna fk_comuna_region; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_comuna
    ADD CONSTRAINT fk_comuna_region FOREIGN KEY (id_region) REFERENCES public.tbl_region(id_region) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- Name: tbl_comentario fk_orden_compra; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_comentario
    ADD CONSTRAINT fk_orden_compra FOREIGN KEY (id_orden_compra) REFERENCES public.tbl_orden_compra(id_orden_compra);


--
-- Name: tbl_tipo_serv_pyme fk_pyme; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_tipo_serv_pyme
    ADD CONSTRAINT fk_pyme FOREIGN KEY (id_pyme) REFERENCES public.tbl_pyme(id_pyme);


--
-- Name: tbl_usuario_pyme fk_pyme; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_usuario_pyme
    ADD CONSTRAINT fk_pyme FOREIGN KEY (id_pyme) REFERENCES public.tbl_pyme(id_pyme);


--
-- Name: tbl_item fk_pyme; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_item
    ADD CONSTRAINT fk_pyme FOREIGN KEY (id_pyme) REFERENCES public.tbl_pyme(id_pyme);


--
-- Name: tbl_orden_compra fk_pyme; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_orden_compra
    ADD CONSTRAINT fk_pyme FOREIGN KEY (id_pyme) REFERENCES public.tbl_pyme(id_pyme);


--
-- Name: tbl_pyme fk_pyme_comuna; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_pyme
    ADD CONSTRAINT fk_pyme_comuna FOREIGN KEY (id_comuna) REFERENCES public.tbl_comuna(id_comuna) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- Name: tbl_sub_serv_pyme fk_sub_serv_pyme_pyme; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_sub_serv_pyme
    ADD CONSTRAINT fk_sub_serv_pyme_pyme FOREIGN KEY (id_pyme) REFERENCES public.tbl_pyme(id_pyme);


--
-- Name: tbl_sub_serv_pyme fk_sub_serv_pyme_sub_servicio; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_sub_serv_pyme
    ADD CONSTRAINT fk_sub_serv_pyme_sub_servicio FOREIGN KEY (id_sub_servicio) REFERENCES public.tbl_sub_servicio(id_sub_servicio);


--
-- Name: tbl_item fk_tipo_item; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_item
    ADD CONSTRAINT fk_tipo_item FOREIGN KEY (id_tipo_item) REFERENCES public.tbl_tipo_item(id_tipo_item);


--
-- Name: tbl_tipo_serv_pyme fk_tipo_servicio; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_tipo_serv_pyme
    ADD CONSTRAINT fk_tipo_servicio FOREIGN KEY (id_tipo_servicio) REFERENCES public.tbl_tipo_servicio(id_tipo_servicio);


--
-- Name: tbl_sub_servicio fk_tipo_servicio; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_sub_servicio
    ADD CONSTRAINT fk_tipo_servicio FOREIGN KEY (id_tipo_servicio) REFERENCES public.tbl_tipo_servicio(id_tipo_servicio);


--
-- Name: tbl_usuario fk_tipo_usuario; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_usuario
    ADD CONSTRAINT fk_tipo_usuario FOREIGN KEY (id_tipo_usuario) REFERENCES public.tbl_tipo_usuario(id_tipo_usuario);


--
-- Name: tbl_usuario_pyme fk_usuario; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_usuario_pyme
    ADD CONSTRAINT fk_usuario FOREIGN KEY (id_usuario) REFERENCES public.tbl_usuario(id_usuario);


--
-- Name: tbl_orden_compra fk_usuario; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_orden_compra
    ADD CONSTRAINT fk_usuario FOREIGN KEY (id_usuario) REFERENCES public.tbl_usuario(id_usuario);


--
-- Name: tbl_item tbl_item_tbl_item__fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tbl_item
    ADD CONSTRAINT tbl_item_tbl_item__fk FOREIGN KEY (id_tipo_sub_servicio) REFERENCES public.tbl_sub_servicio(id_sub_servicio);


--
-- PostgreSQL database dump complete
--

\unrestrict Ic4WpGoPMsHO5dtmbhGFKzxC95KyvdtxA5o5KCjdowP6Uqg2s7gbh10B069zTWW

